<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>
    <meta http-equiv='x-ua-compatible' content='ie=edge'>
    <title>ajax iframe</title>
  </head>
  <body>
    <div id='app'></div>
    <script src='/node_modules/json3/lib/json3.js'></script>
    <script src='/node_modules/es5-shim/es5-shim.js'></script>
    <script src='/node_modules/es5-shim/es5-sham.js'></script>
    <script src='/node_modules/es6-shim/es6-shim.js'></script>
    <script src='/node_modules/es6-shim/es6-sham.js'></script>
    <script src='/node_modules/zoro-base/dist/zoro-base.js'></script>
    <script src='/dist/zoro-ajax.js'></script>
    <script>
      // 模拟 IE7
      var postMessage = window.postMessage
      window.postMessage = null
      var url = 'https://' + location.hostname + ':9527/json'
      ZoroAjax.ajax(url, {
        mode: 'iframe',
        onbeforesend: function (options) {},
        onload: function (obj) {
          console.log(JSON.stringify(obj))
        },
        onerror: function (err) {
          console.err(err)
        }
      })
    </script>
  </body>
</html>
